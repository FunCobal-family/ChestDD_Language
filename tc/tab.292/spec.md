# ChestDD TC292/92 Tabular (tab)

[ChestDD](./../../README.md) > [ChestDD TC](./../index.md) > ChestDD TC292/92 Tabular

本仕様は、MarkDown 共通部、MediaWiki、textile 、Emacs org-mode 等の記法、仕様をもとに策定された。各々の作者に対し、ここに謝意を示す。

## 基本形式

テーブルは`{|`と`|}`の間にスペース区切りでテーブル名を挟んだ行で始まり、空行で終わる。テーブルセルはパイプ`|`で区切られる。物理行内の各トークンは空白` `で区切られるものとするが、ただし後述の配置指定、結合指定の記号や表計算の開始記号と、その直前のテーブルセルの区切りとの間には空白を記述しない。

ただし、以上の開始行、終了行はドキュメント形式における場合であり、データ形式の場合次のような変更をもたらす。

- 開始行のうち`{|`を`{|tab`に変更し、終了行を空行でなく`{|endtab|}`のみの行とする。

### データ行とヘッダー行

テーブルのデータ行はパイプ`|`で始まりパイプ`|`に終わる。またヘッダー行はエクスクラメーションマーク`!`で始まりエクスクラメーションマーク`!`で終わる。

ヘッダー行はテーブル開始行と最初のデータ行の間になければならず、またヘッダー行が複数ある場合は上下対応するセル記述が 1 セルとしてみなされ、セル内で改行される(ヘッダー行が複数ある場合、連続していなければならない)。

### 連続認識・罫線

各テーブル行は改物理行によって区切られるが、コロン`:`によって始めることにより前テーブル行として認識される(が、視認性のためにも 1 テーブル行)。

各テーブル行の間は罫線が引かれ、また各テーブルセルの間は罫線が存在しないことが望ましい(ヘッダー行とデータ行の間は次に示す記号の有無に関わらず太線)。そのほか、パイプとハイフン`|-`のみの行を任意のテーブル行の間に置くことで、罫線が太線となる。この太字罫線行はパイプ`|`で終わる必要はない(むしろ書いてはならない)。

### キャプション

キャプション行はテーブル開始行と最初のデータ行(ヘッダー行がある場合はヘッダー行)の間になければならず、またキャプション行が複数ある場合は含まれるキャプション記述が 1 キャプションとしてみなされ、キャプション内で改行される(キャプション行が複数ある場合、連続していなければならない)。

キャプション行はパイプ`|`で終わる必要はない(むしろ書いてはならない)。

### 配置指定と結合指定

各テーブルセル内において、次の表の通りの記号で開始することにより、配置指定・結合指定を行うことができる。ただし、結合指定以外の指定はドキュメント形式においてのみ利用できるものとし、データ形式においては利用できない。

これらの記号はすべてピリオド`.`で終わるものとするが、ヘッダー行のセルに記述されるものであってかつその列全体に影響を及ぼさせる場合、シングルピリオド`.`の代わりにダブルピリオド`..`を用いる。

列全体の指定とセル単独の指定が異なる場合、セル単独の指定が優先される。

| 記号    | 説明                                     | 例           |
| ------- | ---------------------------------------- | ------------ |
| `<.`    | 左寄せ                                   | `\|<.`       |
| `>.`    | 右寄せ                                   | `\|>.`       |
| `-.`    | センタリング                             | `\|-.`       |
| `^.`    | 上揃え                                   | `\|^.`       |
| `~.`    | 下揃え                                   | `\|~.`       |
| `~.`    | 中央揃え                                 | `\|~.`       |
| `_n.`   | colspan(`n`には結合するセル数を入れる)   | `\|_3.`      |
| `/n.`   | rowspan(`n`には結合するセル数を入れる)   | `\|/2.`      |
| `h(n).` | セル高さ(`n`には CSS サイズ指定を入れる) | `\|h(2em).`  |
| `w(n).` | セル幅(`n`には CSS サイズ指定を入れる)   | `\|w(6em).`  |
| `c(n).` | 背景色(`n`には CSS カラー指定を入れる)   | `\|c(blue).` |

文字色、文字サイズ等は通常の文字に対する書式と同じ。

## スタイル

ドル`$`で始まる行により ID、クラス、CSS を指定することができる。ただし、MarkDown 中などにおいて準用される場合を除き、CSS の指定はできない。

ID はシャープ`#`、クラスはピリオド`.`によって始まり、カンマ`,`によって区切られる(CSS と同様)。

CSS は HTML タグにおける`style`属性による記述と同様に行う(ただし文字列リテラルでなく直書きでよい)。

ID、クラスと CSS はパイプ`|`で区切られる。ID、クラス、CSS の行はパイプ`|`で終わる必要はない(むしろ書いてはならない)。

ただし、スタイルはドキュメント形式においてのみ利用できるものとし、データ形式においては利用できない。

## 表計算

本表中において、表計算を行うことができる。セル中の計算式は等号`=`で始まり、別に示す通りの演算子及び関数は利用できる。

計算式中におけるテーブルセルの指定は Emacs org-mode のテーブルにおけるものと同様である。

| 場所 | 記法 | 例                     |
| ---- | ---- | ---------------------- |
| 行   | @n   | @2 (2 行目)            |
| 列   | $n   | $3 (3 列目)            |
| セル | @m$n | @2$3 (2 行目の 3 列目) |

## 例示

```csdd_tc92
{| TableSample |}
+ Caption Here.
+ Next Line of Caption
$ #id, .class | color: green;
! @H$1 | @H$2 | @H$3 | @H$4 |
| @1$1 | @1$2 | @1$3 | @1$4 |
| @2$1 | @2$2 | @2$3 | @2$4 |
| @3$1 | @3$2 | @3$3 | @3$4 |
| @4$1 | @4$2 | @4$3 | @4$4 |
|-
| @5$1 | @5$2 | @5$3 | @5$4 |

```
